exports.handler = (event, context) => {
  
       try{
              if (event.session.new) {
      // New Session
      console.log("NEW SESSION")
    }
    if (event.request.type==="LaunchRequest") {
        console.log(`LAUNCH REQUEST`)
        context.succeed(generateResponse(buildSpeechletResponse("Okay. Let's try and figure out what's going on. I'm going to go through some popular symptoms, and you can answer yes if you have that symptom, or no if you don't. Are you experiencing any chills?", false),{}))
    }
    if (event.request.type==="IntentRequest") {
        console.log(`INTENT REQUEST`)
        if(event.request.intent.name==="yes") {
            context.succeed(generateResponse(buildSpeechletResponse("Do you have nausea", false),{}))
                if(event.request.intent.name==="yes") {
                    context.succeed(generateResponse(buildSpeechletResponse("You do have nausea", false),{}))
                }
                if(event.request.intent.name==="no") {
                    context.succeed(generateResponse(buildSpeechletResponse("You don't have nausea", false),{}))
                }
        }
        if(event.request.intent.name==="no") {
            context.succeed(generateResponse(buildSpeechletResponse("You don't have any chills", false),{}))
        }
    }
    if (event.request.type==="SessionEndedRequest") {
        console.log(`SESSION ENDED REQUEST`)
    }
       } catch(error) { context.fail(`Exception: ${error}`) } 
 
}


// Helpers
buildSpeechletResponse = (outputText, shouldEndSession) => {

  return {
    outputSpeech: {
      type: "PlainText",
      text: outputText
    },
    shouldEndSession: shouldEndSession
  }

}

generateResponse = (speechletResponse, sessionAttributes) => {

  return {
    version: "1.0",
    sessionAttributes: sessionAttributes,
    response: speechletResponse
  }

}
