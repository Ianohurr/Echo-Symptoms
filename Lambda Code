exports.handler = (event, context) => {
    
    if (event.session.new) {
      // New Session
      console.log("NEW SESSION")
    }
    if (event.request.type==="LaunchRequest") {
        console.log(`LAUNCH REQUEST`)
        context.succeed(generateResponse(buildSpeechletResponse("Welcome to an Alexa Skill, this is running on a deployed lambda function", true),{}))
    }
    else if (event.request.type==="IntentRequest") {
        console.log(`INTENT REQUEST`)
    }
    else {
        console.log(`SESSION ENDED REQUEST`)
    }
}

// Helpers
buildSpeechletResponse = (outputText, shouldEndSession) => {

  return {
    outputSpeech: {
      type: "PlainText",
      text: outputText
    },
    shouldEndSession: shouldEndSession
  }

}

generateResponse = (speechletResponse, sessionAttributes) => {

  return {
    version: "1.0",
    sessionAttributes: sessionAttributes,
    response: speechletResponse
  }

}
